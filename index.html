<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calcular mi salario / Balbo</title>
    <link rel="stylesheet" href="Estylos.css">
</head>

<body>
<div class="conth1">
<h1 class="h1">Calcular mi salario / Bodega</h1>
</div>

<label class="cat">Categoria: 
<select id="opcionesCat">
    <option value="comun">Op. Común</option>
    <option value="especial">Op. Especializado</option>
    <option value="calificado">Op. Calificado</option>
    <option value="foguista">Op. Foguista</option>
    <option value="encargado">Encargado de sección</option>
</select>
</label>

<br>

<label class="ant">Antiguedad: 
<select id="opcionesAnt">
    <option value="1">0</option>
    <option value="2">1</option>
    <option value="3">2</option>
    <option value="4">3</option>   
    <option value="5">4</option>
    <option value="6">5</option>
    <option value="7">6</option>
    <option value="8">7</option>
    <option value="9">8</option>
    <option value="10">9</option>
    <option value="11">10</option>
    <option value="12">11</option>
    <option value="13">12</option>
    <option value="14">13</option>
    <option value="15">14</option>
    <option value="16">15</option>
    <option value="17">16</option>
    <option value="18">17</option>
    <option value="19">18</option>
    <option value="20">19</option>
    <option value="21">20</option>  
    <option value="22">21</option>
    <option value="23">22</option>
    <option value="24">23</option>
    <option value="25">24</option>
    <option value="26">25</option>
    <option value="27">26</option>
    <option value="28">27</option>
    <option value="29">28</option>
    <option value="30">29</option>
</select>
</label>

<br>

<form class="Sec" id="tituloSec">
  <label>¿Titulo? 
    <input type="radio" name="titulo" value="si"> Si
  </label>
  <label>
    <input type="radio" name="titulo" value="no"> No
  </label>
</form>

<br>

<label class="vin">¿Vino retirado? 
  <div>
<select id="opcionesVino">
    <option value="0">NO</option>
    <option value="1">VB Chablis 6x 750</option>
    <option value="2">VB Borgoña 6x 750</option>
    <option value="3">VB Chablis 6x 1125</option>
    <option value="4">VB Borgoña 6x 1125</option>   
    <option value="5">NAMPE Chardonay 6 x 750</option>
    <option value="6">NAMPE Malbec 6 x 750</option>
    <option value="7">NAMPE Cabernet 6 x 750</option>
    <option value="8">NAMPE Tempranillo 6 x 750</option>
    <option value="9">NAMPE Merlot 6 x 750</option>
    <option value="10">NAMPE Syrah 6 x 750</option>
    <option value="11">NAMPE Malbec 6 x 1125</option>
    <option value="12">NAMPE Cabernet 6 x 1125</option>
    <option value="13">CHACABUCO Viognier 6 x 750</option>
    <option value="14">CHACABUCO Chenin dulce 6 x 750</option>
    <option value="15">CHACABUCO Torrontes 6 x 750</option>
    <option value="16">CHACABUCO Sauvignon Blanc 6 x 750</option>
    <option value="17">CHACABUCO Rose 6 x 750</option>
    <option value="18">CHACABUCO Malbec 6 x 750</option>
    <option value="19">CHACABUCO Cabernet 6 x 750</option>
    <option value="20">CHACABUCO Chenin dulce 12 x 500</option>
    <option value="21">CHACABUCO Rose 12 x 500</option>  
    <option value="22">ESTATE Chardonay 6 x 750</option>
    <option value="23">ESTATE Sauvignon Blanc 6 x 750</option>
    <option value="24">ESTATE Malbec 6 x 750</option>
    <option value="25">ESTATE Cabernet 6 x 750</option>
    <option value="26">ESTATE Bonarda 6 x 750</option>
    <option value="27">ESTATE Blend 6 x 750</option>
    <option value="28">RESERVA Chardonay 6 x 750</option>
    <option value="29">RESERVA Malbec 6 x 750</option>
    <option value="30">RESERVA Cabernet 6 x 750</option>
    <option value="31">GRAN CORTE Edicion Limitada 4 x 750</option>
    <option value="32">GRAN CORTE GRAN BLNCO 4 x 750</option>
    <option value="33">CONEJO VERDE Malbec 6 x 750</option>
    <option value="34">CONEJO VERDE Malbec bajo alcohol 6 x 750</option>
    <option value="35">CONEJO VERDE Blanc de Blancs 6 x 750</option>
    <option value="36">CONEJO VERDE Chenin dulce 6 x 750</option>
    <option value="37">CONEJO VERDE Rose 6 x 750</option>
    <option value="38">CONEJO VERDE Espumante Rosado 6 x 750</option>
    <option value="38">CONEJO VERDE Torrontes Dulzon 6 x 750</option>
    <option value="38">CONEJO VERDE Chenin dulce 12 x 500</option>
    <option value="38">CONEJO VERDE Rose 12 x 500</option>
    <option value="38">LOS HAROLDOS Vino Espumante Extra Brut 6 x 750</option>
    <option value="38">LOS HAROLDOS Vino Espumante Rose 6 x 750</option>
</select>
<select id="opcionesVino2">
    <option value="0">NO</option>
    <option value="1">VB Chablis 6x 750</option>
    <option value="2">VB Borgoña 6x 750</option>
    <option value="3">VB Chablis 6x 1125</option>
    <option value="4">VB Borgoña 6x 1125</option>   
    <option value="5">NAMPE Chardonay 6 x 750</option>
    <option value="6">NAMPE Malbec 6 x 750</option>
    <option value="7">NAMPE Cabernet 6 x 750</option>
    <option value="8">NAMPE Tempranillo 6 x 750</option>
    <option value="9">NAMPE Merlot 6 x 750</option>
    <option value="10">NAMPE Syrah 6 x 750</option>
    <option value="11">NAMPE Malbec 6 x 1125</option>
    <option value="12">NAMPE Cabernet 6 x 1125</option>
    <option value="13">CHACABUCO Viognier 6 x 750</option>
    <option value="14">CHACABUCO Chenin dulce 6 x 750</option>
    <option value="15">CHACABUCO Torrontes 6 x 750</option>
    <option value="16">CHACABUCO Sauvignon Blanc 6 x 750</option>
    <option value="17">CHACABUCO Rose 6 x 750</option>
    <option value="18">CHACABUCO Malbec 6 x 750</option>
    <option value="19">CHACABUCO Cabernet 6 x 750</option>
    <option value="20">CHACABUCO Chenin dulce 12 x 500</option>
    <option value="21">CHACABUCO Rose 12 x 500</option>  
    <option value="22">ESTATE Chardonay 6 x 750</option>
    <option value="23">ESTATE Sauvignon Blanc 6 x 750</option>
    <option value="24">ESTATE Malbec 6 x 750</option>
    <option value="25">ESTATE Cabernet 6 x 750</option>
    <option value="26">ESTATE Bonarda 6 x 750</option>
    <option value="27">ESTATE Blend 6 x 750</option>
    <option value="28">RESERVA Chardonay 6 x 750</option>
    <option value="29">RESERVA Malbec 6 x 750</option>
    <option value="30">RESERVA Cabernet 6 x 750</option>
    <option value="31">GRAN CORTE Edicion Limitada 4 x 750</option>
    <option value="32">GRAN CORTE GRAN BLNCO 4 x 750</option>
    <option value="33">CONEJO VERDE Malbec 6 x 750</option>
    <option value="34">CONEJO VERDE Malbec bajo alcohol 6 x 750</option>
    <option value="35">CONEJO VERDE Blanc de Blancs 6 x 750</option>
    <option value="36">CONEJO VERDE Chenin dulce 6 x 750</option>
    <option value="37">CONEJO VERDE Rose 6 x 750</option>
    <option value="38">CONEJO VERDE Espumante Rosado 6 x 750</option>
    <option value="38">CONEJO VERDE Torrontes Dulzon 6 x 750</option>
    <option value="38">CONEJO VERDE Chenin dulce 12 x 500</option>
    <option value="38">CONEJO VERDE Rose 12 x 500</option>
    <option value="38">LOS HAROLDOS Vino Espumante Extra Brut 6 x 750</option>
    <option value="38">LOS HAROLDOS Vino Espumante Rose 6 x 750</option>
</select>
  </div>
</label>

<br>

<form class="mes">
  <label>¿Trabajo el mes completo? 
    <br>
    <input type="radio" name="opcion" value="1"> Si
  </label>
  <label>
    <input type="radio" name="opcion" value="2"> No
  </label>
  <br>
  <label class="horasTrabajadas" id="horasCampo">Horas trabajadas: 
  <input type="number" id="horasTrab" min="0" max="199">
</label>
</form>

<br>

<label class="horasEx">Horas extras al 50%: 
  <input type="number" id="horasEx50" min="0" max="99">
</label>
<label class="horasEx">Horas extras al 100%: 
  <input type="number" id="horasEx100" min="0" max="99">
</label>

<br>

<button class="btnCalc" id="calcularBtn">Calcular</button>
<div id="resultado">
  
</div>

<script src="logica.js"></script>

<!-- ocualtar y mostrar campo horas trabajadas -->
 <script>

document.querySelectorAll('input[name="opcion"]').forEach(function(radio) {
    radio.addEventListener('change', function() {
        const campo = document.getElementById('horasCampo');
        if (this.value === "2") { // "No" seleccionado
            campo.style.display = "block";
        } else {
            campo.style.display = "none";
        }
    });
});

</script>

<script>
document.getElementById('calcularBtn').addEventListener('click', function() {
    // Captura los valores del formulario
    const categoria = document.getElementById('opcionesCat').value;
    const noRem = categoria;
    const antiguedad = parseInt(document.getElementById('opcionesAnt').value) - 1;
    const vino = document.getElementById('opcionesVino').value;
    const vino2 = document.getElementById('opcionesVino2').value; 
    const tieneTitulo = document.querySelector('input[name="titulo"]:checked')?.value === "si";
    const horasExt50 = parseInt(document.getElementById('horasEx50').value) || 0;
    const horasExt100 = parseInt(document.getElementById('horasEx100').value) || 0;
    const horasTrabajadas = parseInt(document.getElementById('horasTrab').value) || 0;
    const trabajoMesCompleto = document.querySelector('input[name="opcion"]:checked')?.value === "2";
    const presenperf = true;
    const presencomp = true;
    const refri = true;

    // Crea el operario
    const operario = new Operario(
        categoria,
        noRem,
        antiguedad,
        vino,
        vino2,
        tieneTitulo,
        horasExt50,
        horasExt100,
        0.11,
        0.03,
        25110,
        0.02,
        presenperf,
        presencomp,
        refri,
        horasTrabajadas,
        9606,
    );

    // Calcula cada ítem
    const basico = operario.valorCategoria[operario.categoria] || 0;
    const adicionalAntiguedad = basico * 0.01 * (operario.antiguedad || 0);
    const asigNoRem = operario.asigNoRem[operario.noRem] || 0;
    const adicionalTitulo = operario.tieneTitulo ? operario.titulo : 0;
    const adicionalPerfec = operario.presenperf ? operario.presentPerfec : 0;
    const adicionalComplet = operario.presencomp ? operario.presentComplet : 0;
    const adicionalRefri = operario.refri ? operario.refrigerio : 0;
    const adicionalVino = (operario.preciosVinos[operario.vino] || 0);
    const adicionalVino2 = (operario.preciosVinos[operario.vino2] || 0);
    const horas50 = (basico / 189) * 1.5 * (operario.horasEx50 || 0);
    const horas100 = (basico / 189) * 2 * (operario.horasEx100 || 0);

    let adicionalHorasTrabajadas = 0;
    if (trabajoMesCompleto) {
    adicionalHorasTrabajadas = (operario.valorHora[operario.categoria] || 0) * (operario.horasTrabajadas || 0);
    }

    const subTotal = basico + adicionalAntiguedad +  + adicionalTitulo +
                  adicionalPerfec + adicionalComplet + 
                  adicionalHorasTrabajadas + horas50 + horas100;

    const descuentoJubilacion = subTotal * operario.jubilacion;
    const descuentoLey19032 = subTotal * operario.ley19032;
    const descuentoSindicato = subTotal * operario.sindicato1;
    const descuentoObraSocial = operario.obraSocial || 0;
    const sepelio = 9606;

    const descuentos = descuentoJubilacion + descuentoLey19032 + descuentoSindicato + 
    descuentoObraSocial + adicionalVino + adicionalVino2 + sepelio;

    const sueldoFinal = (subTotal - descuentos) + (adicionalRefri + asigNoRem);

    // Muestra el detalle en el div resultado
    document.getElementById('resultado').innerHTML = `
        <strong>Detalle de tu sueldo:</strong><br>
        Básico: $${basico}<br>
        Antigüedad: $${adicionalAntiguedad}<br>
        Horas extras 50%: $${horas50.toFixed(2)}<br>
        Horas extras 100%: $${horas100.toFixed(2)}<br>
        Título secundario: $${adicionalTitulo}<br>
        Presentismo perf.: $${adicionalPerfec}<br>
        Presentismo compl.: $${adicionalComplet}<br>
        Asig. no remunerativa: $${asigNoRem}<br>
        Refrigerio: $${adicionalRefri}<br>
        ${trabajoMesCompleto ? `Horas trabajadas: $${adicionalHorasTrabajadas}<br>` : ""}
        <hr>
        <strong>Descuentos:</strong><br>
        Jubilación: - $${descuentoJubilacion.toFixed(2)}<br>
        Ley 19032: - $${descuentoLey19032.toFixed(2)}<br>
        Sindicato: - $${descuentoSindicato.toFixed(2)}<br>
        Sepelio: - $${operario.sepelio}<br>
        Vino retirado: $${adicionalVino}<br>
        Vino retirado: $${adicionalVino2}<br>
        Obra social: - $${descuentoObraSocial}<br>
        <hr>
        <strong>Total:</strong> <span class="totalFinal">$ ${sueldoFinal.toFixed(2)}</span>
    `;
});
</script>

</body>
</html>